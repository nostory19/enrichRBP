<!DOCTYPE html>
<html lang="en">

<head>
    {% load static %}
    <meta charset="utf-8"/>
    <link rel="apple-touch-icon" sizes="76x76" href="{% static '/assets/img/favicon.ico' %}">
    <link rel="icon" type="image/png" href="{% static '/assets/img/favicon.ico' %}">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no'
          name='viewport'/>

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css?family=Nunito:300,300i,400,600,800" rel="stylesheet">

    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css"
          integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">

    <!-- Main CSS -->
    <link href="{% static '/assets/css/main.css' %}" rel="stylesheet"/>
    <link href="{% static '/jicheng.css' %}" rel="stylesheet"/>

    <!-- Animation CSS -->
    <link href="{% static '/assets/css/vendor/aos.css' %}" rel="stylesheet"/>
    <script src="https://cdn.staticfile.org/twitter-bootstrap/5.1.1/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <title> Circular RNA </title>
</head>

<body>
<!------------------------------------------
NAVBAR
------------------------------------------->
<nav class=" navbar navbar-expand-lg navbar-dark bg-primary fixed-top">
    <div class="container-fluid">
        <a class="navbar-brand" href=""><img src="{% static '/img/4.png' %}">
        </a>
        <button class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#navbarColor02"
                aria-controls="navbarColor02" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="navbar-collapse collapse" id="navbarColor02" style="font-size: 17px;">
            <ul class="navbar-nav mr-auto d-flex align-items-center">
                <li class="  nav-item "><a class="nav-link " href="{% url 'home:home_index' %}">
                    <span class="color-code"><i class="bi bi-house"></i></span> Home <span
                        class="sr-only">(current)</span></a></li>
                <li class="nav-item">
                    <a class="nav-link active" style="background-color: #ffffff;border-radius: 1.25rem;"
                       href="{% url 'circular_rna_1:circular_rna_1_index' %}"><span class="color-code"
                                                                                    style="color:black ;"></span><strong
                            style="color:black ;"><i class="bi bi-layers-fill"></i> Circular RNA</strong></a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link" href="{% url 'linearRNA:linearRNA_index' %}"><i class="bi bi-layers-fill"></i>
                        Linear RNA</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link " href="{% url 'download:download_index' %}"><i
                            class="bi bi-cloud-arrow-down-fill"></i></i>
                        Download</a>
                </li>


                <li>
                    <a class="nav-link " href="{% url 'reference:reference_index' %}"><i
                            class="bi bi-distribute-vertical"></i>
                        Reference</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link " href="{% url 'user_guide:user_guide_index' %}"><i class="bi bi-tv-fill"></i>
                        User Guide</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link " href="{% url 'contact:contact_index' %}"><i class="bi bi-person-vcard"></i>
                        Contact</a>
                </li>
            </ul>
            <div>
                <ul class="navbar-nav mr-auto d-flex align-items-center">
                    <li class="nav-item"><a class="  nav-link " href="#"><i class="fab fa-twitter"></i></a></li>
                    <li class="nav-item"><a class="  nav-link" href="#"><i class="fab fa-facebook"></i></a></li>
                    <li class="nav-item"><a class="  nav-link" href="#"><i class="fab fa-linkedin"></i></a></li>
                    <li class="nav-item"><a class="  nav-link" href="#"><i class="fab fa-github"></i></a></li>
                </ul>
            </div>
        </div>
    </div>
</nav>
<!-- End Navbar -->
<!-- Reference -->

<main class="ant-layout-content">
    <div class="reference-page" data-aos="fade-up">
        <!-- 分页导航 -->
        <div class="result-result-body">

            <a href="{% url 'home:home_index' %}">
                <button type="button" class="btn result-title-bar-back nav-link " style="background: #3ee032;">
                    back
                </button>
            </a>
            <div class="ant-breadcrumb ">
                    <span>
                        <span class="Breadcrumb-Item-text" style="font-family:Times New Roman, Times, serif ;text-decoration:none;
                        "> <a href="{% url 'home:home_index' %}" style="color: #000;"><i
                                class="bi bi-house"></i>Home</a></span>
                        <span class="ant-breadcrumb-separator">/</span>
                    </span>
                <span>
                        <span class="Breadcrumb-Item-text"
                              style="font-family:Times New Roman, Times, serif ;text-decoration:none;"><a>Circular
                                RNA</a></span>
                        <span class="ant-breadcrumb-separator">/</span>
                    </span>
            </div>
        </div>
        <!-- 选择方法的导航 -->
        <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="home-tab" data-bs-toggle="tab" data-bs-target="#home"
                        type="button" role="tab" aria-controls="home" aria-selected="true">Upload file
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="profile-tab" data-bs-toggle="tab" data-bs-target="#profile"
                        type="button" role="tab" aria-controls="profile" aria-selected="false">Input Dataset
                </button>
            </li>
        </ul>
        <div class="tab-content" id="myTabContent">
            <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
                <div class="submit-body-outer">
                    <div class="submit-body-inner">
                        <form>
                            <ul class="submit-file">
                                <li>
                                    <div class="row">
                                        <div class="col">
                                            <section class="slice slice-lg">
                                                <div class="container">
                                                    <div
                                                            class="row align-items-center cols-xs-space cols-sm-space cols-md-space">
                                                        <div class="col-lg ml-lg-auto">
                                                            <p class="">
                                                            <h4 class="text-center">Upload gene expression matrix with
                                                                fasta format
                                                                <a href="{% static '/downloadshi/example.zip' %}"><i
                                                                        class="bi bi-cloud-arrow-down-fill"
                                                                        style="float: right;color: #3393ff;"></i></a>
                                                            </h4>
                                                            </p>
                                                            <p class="lead mt-4 mb-4">
                                                            <div class="submit-file-upload">
                                                                <div class="btn btn-theme" onclick="fasta.click()">
                                                                    <input type="file" accept=".fasta, .fas, .txt"
                                                                           onchange="checkFileType(this);" name="fasta"
                                                                           id="fasta"
                                                                           id="fasta" style="display: none;"/>
                                                                    <i class="bi bi-inboxes" style="color: #3393ff;
                                                                        font-size: 50px;"></i><br>
                                                                    <h6>Click or drag gene expression matrix to this
                                                                        area to
                                                                        upload</h6>
                                                                    <h6>file format .fasta</h6>
                                                                    <div class="btn btn-theme" id='file_select'
                                                                         style="color: rgb(80,44,118)">No file selected
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            </p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </section>
                                        </div>
                                    </div>
                                    <div class="submit-footer"></div>
                                    <div class="row">
                                        <div class="col">
                                            <section class="slice slice-lg">
                                                <div class="container">
                                                    <div
                                                            class="row align-items-center cols-xs-space cols-sm-space cols-md-space">
                                                        <div class="col  submit-model">
                                                            <div class="submit-model-body">
                                                                Model-based methods
                                                                <div class="container mr-3">
                                                                    <div class="row ">
                                                                        <div class="col-sm-3 p-3 choosediv">

                                                                            <select class="form-control"
                                                                                    id="model_method_c1">
                                                                                <option value="0" selected="selected">
                                                                                    choose
                                                                                </option>
                                                                                {% for option in options_method %}
                                                                                    <option value="{{ forloop.counter }}">{{ option }}</option>
                                                                                {% endfor %}
                                                                            </select>
                                                                        </div>
                                                                        <div class=" col-sm-3 p-3 choosediv">
                                                                            <select class="form-control"
                                                                                    id="model_method_c2">
                                                                                <option value="0" selected="selected">
                                                                                    choose
                                                                                </option>
                                                                                {% for option in options_parameter.all %}
                                                                                    <option id="{{ option }}"
                                                                                            value="{{ forloop.counter }}">{{ option }}</option>
                                                                                {% endfor %}
                                                                            </select>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>

                                                    </div>
                                                </div>
                                            </section>
                                        </div>
                                    </div>
                                </li>


                                <li>
                                    <div class="submit-file">
                                        <div class="submit-file-border">
                                            <div class="submit-file-heard">
                                                <h3>Input Your E-mail:
                                                </h3>
                                            </div>
                                            <div class="submit-body-model">
                                                <table>
                                                    <input type="text" id="email" name="email" class="text-email"
                                                           placeholder="E-mail">
                                                    <p>Optional: The running time usually takes several hours for
                                                        training a
                                                        deep
                                                        learning model depending on your data size. Hence, we strongly
                                                        recommend you
                                                        to
                                                        leave your email below, and you will be notified by email when
                                                        the
                                                        job is
                                                        done.
                                                    </p>
                                                </table>
                                            </div>
                                            <div class="submit-footer"></div>
                                        </div>
                                    </div>
                                </li>


                                <li>
                                    <div class="mt-4 text-center">
                                        <div class="col">
                                            <button type="submit" class="btn btn-primary" data-toggle="tooltip"
                                                    data-placement="top" title="" data-original-title="Tooltip on top"
                                                    style=" width:150px" onclick="upload1()">
                                                Submit
                                            </button>
                                            <a href="{% url 'circular_rna_1:circular_rna_1_index' %}">
                                                <button type="button" class="btn btn-primary"
                                                        data-toggle="tooltip" data-placement="right" title=""
                                                        data-original-title="Tooltip on right" style=" width:150px">
                                                    Reset
                                                </button>
                                            </a>
                                        </div>
                                    </div>
                                    </table>
                                </li>
                            </ul>
                        </form>
                    </div>

                </div>
            </div>
            <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">

                <div class="submit-body-outer">
                    <div class="submit-body-inner">
                        <form>
                            <ul class="submit-file">
                                <li>
                                    <div class="row">
                                        <div class="col">
                                            <section class="slice slice-lg">
                                                <div class="container">
                                                    <div
                                                            class="row align-items-center cols-xs-space cols-sm-space cols-md-space">
                                                        <div class="col-lg">
                                                            <a href="{% static '/downloadshi/example.zip' %}"><i
                                                                    class="bi bi-cloud-arrow-down-fill"
                                                                    style="float: right;color: #3393ff;"></i></a>
                                                            <div class="row">
                                                                <!--<h4 class="mb-4 ">Input-->
                                                                <!--    Dataset:-->
                                                                <!--</h4>-->
                                                                <!-- <p class="mb-4 "> Please input in strict
                                                                    accordance with the following input box!
                                                                </p> -->
                                                            </div>
                                                            <div class="">

                                                                <p class=""> Please input in strict
                                                                    accordance with the following input box!
                                                                </p>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-12">
                                                                    <div class="form-group">
                                                                            <textarea class="form-control" rows="5"
                                                                                      style="height: 180px;"
                                                                                      id="textarea"
                                                                                      placeholder=">chr1:150523026-150523151(+)  GCAUCAGAGAAGGGGCAGGCAGUGACUAUCACCCCAUUUCUUCUUCCCUCAGCUGGAGUAACAAGAGUCAGGCAGAGCCUGAAGACUUGGGUGGAACAUGG"></textarea>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class=" text-center">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </section>
                                        </div>
                                    </div>
                                    <div class="submit-footer"></div>
                                    <div class="row">
                                        <div class="col">
                                            <section class="slice slice-lg">
                                                <div class="container">
                                                    <div
                                                            class="row align-items-center cols-xs-space cols-sm-space cols-md-space">
                                                        <div class="col  submit-model">
                                                            <div class="submit-model-body">
                                                                Model-based methods
                                                                <div class="container mr-3">
                                                                    <form>
                                                                        <div class="row ">
                                                                            <div class="col-sm-3 p-3 choosediv">

                                                                                <select class="form-control"
                                                                                        id="model_method_c1_input">
                                                                                    <option value="0"
                                                                                            selected="selected">choose
                                                                                    </option>
                                                                                    {% for option in options_method %}
                                                                                        <option value="{{ forloop.counter }}">{{ option }}</option>
                                                                                    {% endfor %}
                                                                                </select>
                                                                            </div>
                                                                            <div class=" col-sm-3 p-3 choosediv">
                                                                                <select class="form-control"
                                                                                        id="model_method_c2_input">
                                                                                    <option value="0"
                                                                                            selected="selected">choose
                                                                                    </option>
                                                                                    {% for option in options_parameter.all %}
                                                                                        <option id="{{ option }}input"
                                                                                                value="{{ forloop.counter }}">{{ option }}</option>
                                                                                    {% endfor %}
                                                                                </select>
                                                                            </div>
                                                                        </div>
                                                                    </form>
                                                                </div>

                                                            </div>
                                                        </div>

                                                    </div>
                                                </div>
                                            </section>
                                        </div>
                                    </div>
                                </li>


                                <li>
                                    <div class="submit-file">
                                        <div class="submit-file-border">
                                            <div class="submit-file-heard">
                                                <h3>Input Your E-mail:
                                                </h3>
                                            </div>
                                            <div class="submit-body-model">
                                                <form action="" onSubmit="return inputNull(this)">
                                                    <table>
                                                        <input type="text" id="email_input" class="text-email"
                                                               placeholder="E-mail">
                                                    </table>
                                                </form>
                                                <p>Optional: The running time usually takes several hours for training a
                                                    deep
                                                    learning model depending on your data size. Hence, we strongly
                                                    recommend you
                                                    to
                                                    leave your email below, and you will be notified by email when the
                                                    job is
                                                    done.
                                                </p>
                                            </div>
                                            <div class="submit-footer"></div>
                                        </div>
                                    </div>
                                </li>


                                <li>
                                    <div class="mt-4 text-center">
                                        <div class="col">
                                            <button class="btn btn-primary" data-toggle="tooltip"
                                                    data-placement="top" title="" data-original-title="Tooltip on top"
                                                    style=" width:150px" onclick="upload2()">
                                                Submit
                                            </button>
                                            <a href="{% url 'circular_rna_1:circular_rna_1_index' %}">
                                                <button type="button" class="btn btn-primary"
                                                        data-toggle="tooltip" data-placement="right" title=""
                                                        data-original-title="Tooltip on right" style=" width:150px">
                                                    Reset
                                                </button>
                                            </a>
                                        </div>
                                    </div>
                                    </table>
                                </li>
                            </ul>
                        </form>
                    </div>

                </div>
            </div>
        </div>


    </div>
</main>

<!--------------------------------------
FOOTER
--------------------------------------->
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
     x="0px" y="0px" viewbox="0 0 1440 126" style="enable-background:new 0 0 1440 126;" xml:space="preserve">
        <path class="bg-black" d="M685.6,38.8C418.7-11.1,170.2,9.9,0,30v96h1440V30C1252.7,52.2,1010,99.4,685.6,38.8z"/>
    </svg>
<footer class="bg-black pb-5">
    <div class="container ">
        <div class="row text-center">
            <div class="col col-md">
                <p class="mb-4 text-white" style="font-family: Times New Roman, Times, serif; font-size: 15px;"><i
                        class="bi bi-box-seam-fill"></i> Copyright</h5>
                <ul class="list-unstyled text-small">
                    <li style="font-family: Times New Roman, Times, serif; font-size: 15px;"><a class="text-muted"
                    >2022-Present</a></li>
                </ul>
            </div>
            <div class="col col-md">
                <p class="mb-4 text-white" style="font-family: Times New Roman, Times, serif;font-size: 15px;"><i
                        class="bi bi-geo-alt-fill"></i> jilin University at jilin</h5>
                <ul class="list-unstyled text-small">
                    <li style="font-family: Times New Roman, Times, serif;font-size: 15px;"><a class="text-muted"
                    >China
                    </a></li>
                </ul>
            </div>
            <div class="col col-md">
                <p class="mb-4 text-white" style="font-family: Times New Roman, Times, serif;font-size: 15px;"><i
                        class="bi bi-envelope-fill"></i> Contact</h5>
                <ul class="list-unstyled text-small">
                    <li style="font-family: Times New Roman, Times, serif;font-size: 15px;"><a class="text-muted"
                    >lixt314@jlu.edu.cn</a></li>
                </ul>
            </div>
        </div>
    </div>
</footer>
</footer>
<!-- End Footer -->

</main>
<script type="text/javascript">
    //输入城市列表，每行与国家下拉框对应
    var citylist = [
        ["1", "2", "3"],
        ["a", "b", "c"],
        ["A", "B", "C"]
    ];

    //第一个select框改变即执行该函数
    function getCity() {
        //通过DOM选择下拉菜单
        var country = document.getElementById("country");
        var city = document.getElementById("city");
        //获取该国家对应的城市列表
        var cityArray = citylist[country.selectedIndex - 1];	//selectedIndex就是第几个option
        city.length = 1;  //默认会有一个option
        for (var i = 0; i < cityArray.length; i++) {
            //Option(text, value)
            city[i + 1] = new Option(cityArray[i], i + 1);
        }
    }
</script>
<script charset="utf-8">

    function checkFileType(_this) {
        var $this = $(_this);
        var acceptType = $this.attr('accept');
        var selectedFile = $this.val();
        var fileType = selectedFile.substring(selectedFile.indexOf('.') + 1, selectedFile.length);
        var location = acceptType.indexOf(fileType);
        if (location > -1) {
            return true;
        } else {
            $this.attr('value', '');
            alert('请选择' + acceptType + '格式文件');
            return false;
        }
        return true;
    }

    //判断输入框中的内容
    function check_task() {
        var sequences = document.getElementById("textarea").value
        if (sequences.search('>') == -1) {
            alert("The DNA sequences should be in a fasta format!");
            return false;
        }

        var sequences_array = sequences.split('>');
        var sequences_length_dict = new Array();

        // 最大允许提交2000条序列
        if (sequences_array.length - 1 > 2000) {
            alert("The maximum number of sequence is 2000 in one submission!");
            return false;
        }

        var max_sequence_length = 0;
        for (i in sequences_array) {
            if (sequences_array[i] != "") {
                var tmp_array = sequences_array[i].split('\n');

                tmp_array.shift()
                tmp_sequence = tmp_array.join('');
                tmp_sequence = tmp_sequence.replace(/\s/, "");


                sequences_length_dict[tmp_sequence.length] = 0;
                // 非法字符处理
                if (tmp_sequence.search(/[^QWERTYUIOPLKJHGFDSAZXCVBNMqwertyuioplkjhgfdsazxcvbnm-]/) != -1) {
                    alert("Illegal character(s) are included in the FASTA sequence.");
                    return false;
                }
                // 非序列长度处理
                if (tmp_sequence.length < 101) {
                    alert("The submitted sequence length must be greater than or equal to 101-bp.\n" + tmp_sequence);
                    return false;
                }
                if (tmp_sequence.length > max_sequence_length) {
                    max_sequence_length = tmp_sequence.length;
                }
            }
        }
        return true;
    }

    //邮箱检查
    function inputNull() {
        var email = document.getElementById("email").value;
        if (/[a-zA-Z0-9_-]+@(([a-zA-z0-9]-*){1,}\.){1,3}[a-zA-z\-]{1,}$/.test(email) == false) {
            alert("The mailbox entered is wrong!")
            return false;
        }
        return true;
    }

    function inputNull_input() {
        var email = document.getElementById("email_input").value;
        if (/[a-zA-Z0-9_-]+@(([a-zA-z0-9]-*){1,}\.){1,3}[a-zA-z\-]{1,}$/.test(email) == false) {
            alert("The mailbox entered is wrong!")
            return false;
        }
        return true;
    }


    function choosefile() {
        var fileList = document.getElementById('fasta').files;
        var nameStr = '';
        for (var i = 0; i < fileList.length; i++) {
            nameStr += `${i === 0 ? '' : ', '}${fileList[i].name}`;
            var reader = new FileReader();
            reader.readAsText(fileList[i], "UTF-8");
            reader.onload = function (e) {
                var content = e.target.result;
                console.log(content);
                // const textAreaVal = document.getElementById('text').value;
                const textAreaVal = '';
                sequences = textAreaVal + content;
                if (sequences.search('>') == -1) {
                    alert("The DNA sequences should be in a fasta format!");
                    return false;
                }

                var sequences_array = sequences.split('>');
                var sequences_length_dict = new Array();

                // 最大允许提交2000条序列
                if (sequences_array.length - 1 > 2000) {
                    alert("The maximum number of sequence is 2000 in one submission!");
                    return false;
                }

                var max_sequence_length = 0;
                for (i in sequences_array) {
                    if (sequences_array[i] != "") {
                        var tmp_array = sequences_array[i].split('\n');

                        tmp_array.shift()
                        tmp_sequence = tmp_array.join('');
                        tmp_sequence = tmp_sequence.replace(/\s/, "");


                        sequences_length_dict[tmp_sequence.length] = 0;
                        // 非法字符处理
                        if (tmp_sequence.search(/[^QWERTYUIOPLKJHGFDSAZXCVBNMqwertyuioplkjhgfdsazxcvbnm-]/) != -1) {
                            alert("Illegal character(s) are included in the FASTA sequence.");
                            return false;
                        }
                        // 非序列长度处理
                        if (tmp_sequence.length < 101) {
                            alert("The submitted sequence length must be greater than or equal to 101-bp.\n" + tmp_sequence);
                            return false;
                        }
                        if (tmp_sequence.length > max_sequence_length) {
                            max_sequence_length = tmp_sequence.length;
                        }
                    }
                }
            }
        }
        return true
    }


    //最后上传submit


    function sltCheck() {
        //文件检查
        var x = document.getElementById("fasta").value;
        console.log(x)
        if (x == "") {
            alert('Please select one from the upload file')
            return false;
        }

        // var slt = document.getElementById("country");
        // var slc = document.getElementById("city");
        // if (slt.value === "" || slc.value === "") {
        //  alert("Please select a model");
        //   return false;
        //}
        var options = document.getElementsByTagName('option');
        var model_method_c1;
        var model_method_c2;
        var flag = 1;
        for (var i = 0; i < options.length; i++) {
            if (options[i].selected && flag === 1) {
                model_method_c1 = options[i].text;

                flag = 2;
            } else if (options[i].selected && flag === 2) {
                model_method_c2 = options[i].text;
                flag = -1;
            }
        }
        console.log(model_method_c1, model_method_c2)
        if (model_method_c1 === "" || model_method_c2 === "") {
            alert("Please select a model");
            return false;
        }
        return true;
    }

    function sltCheckinput() {
        //文件检查
        if (document.getElementById("textarea").value == 0) {
            alert('please input！！！')
            return false;
        } else {
            if (check_task() == false) {
                return false;
            }
        }
        //模型选择
        //var slt = document.getElementById("country");
        //var slc = document.getElementById("city");
        //if (slt.value === "" || slc.value === "") {
        //  alert("Please select a model");
        //   return false;
        //}
        return true;
    }
</script>
<!--------------------------------------
JAVASCRIPTS
--------------------------------------->
<script src="{% static '/assets/js/vendor/jquery.min.js' %}" type="text/javascript"></script>
<script src="{% static '/assets/js/vendor/popper.min.js' %}" type="text/javascript"></script>
<script src="{% static '/assets/js/vendor/bootstrap.min.js' %}" type="text/javascript"></script>
<script src="{% static '/assets/js/functions.js' %}" type="text/javascript"></script>

<!-- Animation -->
<script src="{% static '/assets/js/vendor/aos.js' %}" type="text/javascript"></script>
<noscript>
    <style>
        *[data-aos] {
            display: block !important;
            opacity: 1 !important;
            visibility: visible !important;
        }
    </style>
</noscript>
<script>
    AOS.init({
        duration: 700
    });
</script>

<!-- Disable animation on less than 1200px, change value if you like -->
<script>
    AOS.init({
        disable: function () {
            var maxWidth = 1200;
            return window.innerWidth < maxWidth;
        }
    });
</script>
</body>
<script type="application/javascript">

    var countnum = 0;

    function upload1() {
        let request = new XMLHttpRequest();
        //if(checkFileType()){
        //countnum++;
        //}
        //if(check_task()) {
        //countnum = countnum + 1;
        //}
        if (!sltCheck()) {
            countnum = 1;
            return;
        } else if (!choosefile()) {
            countnum = 1;
            return;
        } else if (!inputNull()) {
            countnum = 1;
            return;
        }
        if (countnum === 0) {
            //countnum =countnum - 1;
            request.open("POST", '{% url 'circular_rna_1:circular_rna_1_upload' %}', true);
            var file_csv = document.getElementById('fasta').files[0];
            // var input_csv = document.getElementById('exampleFormControlTextarea1').value;
            var email = document.getElementById('email').value;
            var model_method_c1;
            var model_method_c2;
            model_method_c1 = $("#model_method_c1").find("option:selected").text();
            model_method_c2 = $("#model_method_c2").find("option:selected").text();
            if (model_method_c1 == "choose" || model_method_c2 == "choose" || model_method_c1 == "" || model_method_c2 == "") {
                alert('Please select a model!')
            } else {
                var formdata1 = new FormData();
                formdata1.append('file_csv', file_csv);
                // formdata1.append('input_csv',input_csv);
                formdata1.append('email', email);
                formdata1.append('model_method_c1', model_method_c1);
                formdata1.append('model_method_c2', model_method_c2);
                alert('The task is submitted successfully, please be patient!')

                request.send(formdata1);

                request.onreadystatechange = function () {
                    if (request.readyState === 4 && request.status === 200) {
                        let text = request.responseText;
                    }
                }
            }
        }
    }

    function upload2() {
        var countnum = 0;
        let request = new XMLHttpRequest();
        if (!check_task()) {
            countnum = 1;
            return;
        } else if (!inputNull_input()) {
            countnum = 1;
            return;
        }
        if (countnum === 0) {
            request.open("POST", '{% url 'circular_rna_1:circular_rna_1_upload' %}', true);
            var textarea = document.getElementById('textarea').value;
            var email = document.getElementById('email_input').value;
            var model_method_c1;
            var model_method_c2;
            model_method_c1 = $("#model_method_c1_input").find("option:selected").text();
            model_method_c2 = $("#model_method_c2_input").find("option:selected").text();
            if (model_method_c1 == "choose" || model_method_c2 == "choose" || model_method_c1 == "" || model_method_c2 == "") {
                alert('Please select a model!')
            } else {
                var formdata1 = new FormData();
                formdata1.append('textarea', textarea);
                formdata1.append('email', email);
                formdata1.append('model_method_c1', model_method_c1);
                formdata1.append('model_method_c2', model_method_c2);
                alert('The task is submitted successfully, please be patient!')

                request.send(formdata1);

                request.onreadystatechange = function () {
                    if (request.readyState === 4 && request.status === 200) {
                        let text = request.responseText;
                    }
                }
            }
        }
    }

    //进度条的控制
    $("#submit_btn1").click(function () {
        var i = 0;
        var mDiv = setInterval(function () {
            if (i >= 100) {
                clearInterval(mDiv);
            }
            var myDiv = document.getElementById("myDiv");
            myDiv.style.width = i + "%";
            myDiv.innerText = i + "%";
            i++;
        }, 600)
        $('.modal').modal("show");
    });
    $("#close_btn1").click(function () {
        $(".modal").modal("hide");
    });
    $("#model_method_c1").on('change', function () {
        var myselect = document.getElementById('model_method_c1');
        var index = myselect.selectedIndex;
        var text = myselect.options[index].innerText;
        if (text === 'circSLSNN') {
            {% for id_all in options_parameter.all %}
                $("#{{id_all}}").show();
            {% endfor %}
            var flag = 0;
            {% for id_all in options_parameter.all %}
                {% for id_item in options_parameter.circSLSNN %}
                    {% if id_item == id_all %}
                        flag = 1;
                    {% endif %}
                {% endfor %}
                if (flag === 0) {
                    $("#{{id_all}}").hide();
                }
                flag = 0;
            {% endfor %}
        } else if (text === 'circRBP_DHN') {
            {% for id_all in options_parameter.all %}
                $("#{{id_all}}").show();
            {% endfor %}
            var flag = 0;
            {% for id_all in options_parameter.all %}
                {% for id_item in options_parameter.circRBP_DHN %}
                    {% if id_item == id_all %}
                        flag = 1;
                    {% endif %}
                {% endfor %}
                if (flag === 0) {
                    $("#{{id_all}}").hide();
                }
                flag = 0;
            {% endfor %}
        } else if (text === 'CRIP') {
            {% for id_all in options_parameter.all %}
                $("#{{id_all}}").show();
            {% endfor %}
            var flag = 0;
            {% for id_all in options_parameter.all %}
                {% for id_item in options_parameter.CRIP %}
                    {% if id_item == id_all %}
                        flag = 1;
                    {% endif %}
                {% endfor %}
                if (flag === 0) {
                    $("#{{id_all}}").hide();
                }
                flag = 0;
            {% endfor %}
        } else if (text === 'CSCRSites') {
            {% for id_all in options_parameter.all %}
                $("#{{id_all}}").show();
            {% endfor %}
            var flag = 0;
            {% for id_all in options_parameter.all %}
                {% for id_item in options_parameter.CSCRSites %}
                    {% if id_item == id_all %}
                        flag = 1;
                    {% endif %}
                {% endfor %}
                if (flag === 0) {
                    $("#{{id_all}}").hide();
                }
                flag = 0;
            {% endfor %}
        }

    })
    //进度条的控制
    $("#submit_btn1").click(function () {
        var i = 0;
        var mDiv = setInterval(function () {
            if (i >= 100) {
                clearInterval(mDiv);
            }
            var myDiv = document.getElementById("myDiv");
            myDiv.style.width = i + "%";
            myDiv.innerText = i + "%";
            i++;
        }, 600)
        $('.modal').modal("show");
    });
    $("#close_btn1").click(function () {
        $(".modal").modal("hide");
    });
    $("#model_method_c1").on('change', function () {
        var myselect = document.getElementById('model_method_c1');
        var index = myselect.selectedIndex;
        var text = myselect.options[index].innerText;
        if (text === 'circSLSNN') {
            {% for id_all in options_parameter.all %}
                $("#{{id_all}}").show();
            {% endfor %}
            var flag = 0;
            {% for id_all in options_parameter.all %}
                {% for id_item in options_parameter.circSLSNN %}
                    {% if id_item == id_all %}
                        flag = 1;
                    {% endif %}
                {% endfor %}
                if (flag === 0) {
                    $("#{{id_all}}").hide();
                }
                flag = 0;
            {% endfor %}
        } else if (text === 'circRBP_DHN') {
            {% for id_all in options_parameter.all %}
                $("#{{id_all}}").show();
            {% endfor %}
            var flag = 0;
            {% for id_all in options_parameter.all %}
                {% for id_item in options_parameter.circRBP_DHN %}
                    {% if id_item == id_all %}
                        flag = 1;
                    {% endif %}
                {% endfor %}
                if (flag === 0) {
                    $("#{{id_all}}").hide();
                }
                flag = 0;
            {% endfor %}
        } else if (text === 'CRIP') {
            {% for id_all in options_parameter.all %}
                $("#{{id_all}}").show();
            {% endfor %}
            var flag = 0;
            {% for id_all in options_parameter.all %}
                {% for id_item in options_parameter.CRIP %}
                    {% if id_item == id_all %}
                        flag = 1;
                    {% endif %}
                {% endfor %}
                if (flag === 0) {
                    $("#{{id_all}}").hide();
                }
                flag = 0;
            {% endfor %}
        } else if (text === 'CSCRSites') {
            {% for id_all in options_parameter.all %}
                $("#{{id_all}}").show();
            {% endfor %}
            var flag = 0;
            {% for id_all in options_parameter.all %}
                {% for id_item in options_parameter.CSCRSites %}
                    {% if id_item == id_all %}
                        flag = 1;
                    {% endif %}
                {% endfor %}
                if (flag === 0) {
                    $("#{{id_all}}").hide();
                }
                flag = 0;
            {% endfor %}
        }

    })
    $("#fasta").change(function () {
        var file = document.getElementById('fasta').files[0];
        var name = file.name;
        alert('The file has been selected: ' + name);
        $("#file_select").text('The file has been selected: ' + name);
    })
    $("#model_method_c1_input").on('change', function () {
        var myselect = document.getElementById('model_method_c1_input');
        var index = myselect.selectedIndex;
        var text = myselect.options[index].innerText;
        if (text === 'circSLSNN') {
            {% for id_all in options_parameter.all %}
                $("#{{id_all}}input").show();
            {% endfor %}
            var flag = 0;
            {% for id_all in options_parameter.all %}
                {% for id_item in options_parameter.circSLSNN %}
                    {% if id_item == id_all %}
                        flag = 1;
                    {% endif %}
                {% endfor %}
                if (flag === 0) {
                    $("#{{id_all}}input").hide();
                }
                flag = 0;
            {% endfor %}
        } else if (text === 'circRBP_DHN') {
            {% for id_all in options_parameter.all %}
                $("#{{id_all}}input").show();
            {% endfor %}
            var flag = 0;
            {% for id_all in options_parameter.all %}
                {% for id_item in options_parameter.circRBP_DHN %}
                    {% if id_item == id_all %}
                        flag = 1;
                    {% endif %}
                {% endfor %}
                if (flag === 0) {
                    $("#{{id_all}}input").hide();
                }
                flag = 0;
            {% endfor %}
        } else if (text === 'CRIP') {
            {% for id_all in options_parameter.all %}
                $("#{{id_all}}input").show();
            {% endfor %}
            var flag = 0;
            {% for id_all in options_parameter.all %}
                {% for id_item in options_parameter.CRIP %}
                    {% if id_item == id_all %}
                        flag = 1;
                    {% endif %}
                {% endfor %}
                if (flag === 0) {
                    $("#{{id_all}}input").hide();
                }
                flag = 0;
            {% endfor %}
        } else if (text === 'CSCRSites') {
            {% for id_all in options_parameter.all %}
                $("#{{id_all}}input").show();
            {% endfor %}
            var flag = 0;
            {% for id_all in options_parameter.all %}
                {% for id_item in options_parameter.CSCRSites %}
                    {% if id_item == id_all %}
                        flag = 1;
                    {% endif %}
                {% endfor %}
                if (flag === 0) {
                    $("#{{id_all}}input").hide();
                }
                flag = 0;
            {% endfor %}
        }

    })

</script>
</html>